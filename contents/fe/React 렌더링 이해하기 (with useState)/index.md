---
date: '2023-05-28'
title: 'React ë Œë”ë§ ì´í•´í•˜ê¸° (with useState)'
categories: ['WEB', 'React']
summary: 'React ë Œë”ë§ê³¼ setStateì˜ ë™ì‘ ë°©ì‹ì— ëŒ€í•´ì„œ ë‹¤ì‹œ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì™€ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³´ë©° ì˜ëª» ì´í•´í•œ ë¶€ë¶„ì„ ë°”ë¡œ ì¡ê¸° ìœ„í•œ ê³¼ì •ì„ ì •ë¦¬í•´ ë´¤ìŠµë‹ˆë‹¤.'
thumbnail: './i_react-batching.png'
---

React ë Œë”ë§ê³¼ setStateì˜ ë™ì‘ ë°©ì‹ì— ëŒ€í•´ì„œ ë‹¤ì‹œ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì™€ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³´ë©° ì˜ëª» ì´í•´í•œ ë¶€ë¶„ì„ ë°”ë¡œ ì¡ê¸° ìœ„í•œ ê³¼ì •ì„ ì •ë¦¬í•´ ë´¤ìŠµë‹ˆë‹¤.

í•´ë‹¹ ê°œë…ì„ í•™ìŠµí•œ ì´ìœ ë¶€í„° ì‹œì‘í•´ í•´ì†Œ ê³¼ì •ì„ ë‹¤ë£¨ì—ˆê¸° ë•Œë¬¸ì— ê¸€ì´ ê¹ë‹ˆë‹¤. í•µì‹¬ë§Œ íŒŒì•…í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì€ [4ë²ˆ - ê³µì‹ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ëŠ” Renderì™€ Commit](#4-%EF%B8%8Fê³µì‹-ë¬¸ì„œì—ì„œ-ì„¤ëª…í•˜ëŠ”-renderì™€-commit%EF%B8%8F)ê³¼ [6ë²ˆ - useStateëŠ” ì™œ ì´ë ‡ê²Œ ë™ì‘í•´?](#6-%EF%B8%8FusestateëŠ”-ì™œ-ì´ë ‡ê²Œ-ë™ì‘í•´%EF%B8%8F)ë§Œ ë³´ì‹œë©´ ë©ë‹ˆë‹¤!

## 0. ìš”ì•½

React ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— í‘œì‹œë˜ëŠ” ê³¼ì •ì—ì„œ Render phaseì™€ Commit phaseë¥¼ êµ¬ë¶„í•´ì„œ ìƒê°í•´ì•¼ í•©ë‹ˆë‹¤. `Render phase`ëŠ” Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ react elementë¥¼ ë°˜í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ê°€ìƒë” ì¬ì¡°ì • ì‘ì—…ì´ ì§„í–‰ë˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. `Commit phase`ëŠ” ì¬ì¡°ì •í•œ ê°€ìƒ ë”ì„ ì‹¤ì œ ë”ì— ì ìš©í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

setState í˜¸ì¶œì´ ì¦‰ì‹œ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ReactëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìƒíƒœ ë³€ê²½ì„ ì¼ê´„ ì²˜ë¦¬í•˜ê³  ìµœì ì˜ ì„±ëŠ¥ì„ ìœ„í•´ ì—…ë°ì´íŠ¸ë¥¼ ì§€ì—°ì‹œí‚µë‹ˆë‹¤.

`setStateë¥¼ í˜¸ì¶œí•œë‹¤ëŠ” ê²ƒì€ stateë¥¼ ë°”ë¡œ ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šê³  update í•¨ìˆ˜ë¥¼ í(ëŒ€ê¸°ì—´)ì— ë„£ëŠ” í–‰ìœ„`ì…ë‹ˆë‹¤. ReactëŠ” ëª¨ë“  update í•¨ìˆ˜ë¥¼ íì— ì €ì¥í•œ ë‹¤ìŒ render phaseì—ì„œ í‰ê°€í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ReactëŠ” ê¸°ë³¸ì ìœ¼ë¡œ re-renderë¥¼ ì˜ˆì•½í•©ë‹ˆë‹¤. ReactëŠ” render phaseì˜ ì¬ì¡°ì •(Reconciliation)ê³¼ì •ì—ì„œ ëŒ€ê¸° ì¤‘ì¸ update í•¨ìˆ˜ë“¤ì„ ì ìš©í•œë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 1. ì™œ ê³µë¶€í•˜ê¸° ì‹œì‘í–ˆëŠ”ì§€

React ê³¼ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì—°ìŠµí•˜ëŠ” ê³¼ì •ì—ì„œ useStateë¥¼ í™œìš©í•œ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ê³¼ì •ì—ì„œ ì œê°€ ì˜ˆìƒí•œ ë™ì‘ê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ” ë¶€ë¶„ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” React ì»´í¬ë„ŒíŠ¸ë¥¼ â€œjsxë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜â€ë¼ê³  ìƒê°í•˜ê³  ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. â€œëª¨ë“  ë Œë”ë§ì€ ê³ ìœ ì˜ prop, state, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ê°€ì§„ë‹¤.â€, â€œsnapshotâ€ ë“±ì˜ ê°œë…ì„ ì•Œê³  ìˆì—ˆê³  ì• ì´ˆì— useStateí•¨ìˆ˜ë¥¼ ë³µì¡í•œ ë¡œì§ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìˆê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•œ ì ì€ ì—†ì—ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì˜ˆìƒê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ” ë””ë²„ê±°ë¥¼ ë³´ë©° ì œê°€ ì»´í¬ë„ŒíŠ¸ì™€ ë Œë”ë§ì— ëŒ€í•´ì„œ ì˜ëª» ì´í•´í•˜ê³  ìˆëŠ” ë¶€ë¶„ì´ ìˆêµ¬ë‚˜ ì‹¶ì—ˆìŠµë‹ˆë‹¤. ì¶”ìƒì ìœ¼ë¡œ ì´í•´í•˜ê³  ì‚¬ìš©í–ˆë˜ ê²ƒ ê°™ì•„ ê³µì‹ ë¬¸ì„œë¥¼ ë³´ë©´ì„œ ë‹¤ì‹œ í•™ìŠµí•´ ë´¤ìŠµë‹ˆë‹¤.

```jsx
const init = () => {
  console.log('init')
  return 0
}

const add = (prev: number) => {
  console.log('add', prev)
  return prev + 1
}

function App() {
  console.log('app render')
  const [count, setCount] = useState(init)

  const handleClick = () => {
    console.log('click')
    setCount(add)
    setCount(add)
  }

  return <button onClick={handleClick}>count is {count}</button>
}

export default App
```

**ì˜ˆìƒ ë™ì‘**

```markdown
mount: app render â†’ init â†’ return
click: click â†’ add 0 â†’ add 1 â†’ app render â†’ return
```

**ì‹¤ì œ ë™ì‘**

```markdown
mount: app render â†’ init â†’ return
1st click: click â†’ add 0 â†’ app render â†’ add 1 â†’ return
2nd click after : click â†’ app render â†’ add 2 â†’ add 3 â†’ return
```

## 2. ì–´ë–¤ ë¶€ë¶„ì„ ì˜ëª» ì•Œê³  ìˆì—ˆì„ê¹Œ?

ì˜ëª» ì´í•´í•œ ë¶€ë¶„ì„ ì°¾ê¸° ìœ„í•´ "**ReactëŠ” ì–¸ì œ ë˜ëŠ” ì™œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ”ì§€**"ì— ëŒ€í•´ ë‹¤ì‹œ ì°¾ì•„ë³¼ í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ê²½ìš°ëŠ” ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. React ì»´í¬ë„ŒíŠ¸ì— ì˜ˆì •ëœ ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ìˆì„ ê²½ìš°
2. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë˜ê³  í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ì—ì„œ ì œì™¸ë˜ëŠ” ê¸°ì¤€ì— ì¶©ì¡±í•˜ì§€ ì•Šì„ ê²½ìš°

cf> ë¦¬ë Œë”ë§ ì œì™¸ ì¡°ê±´ 4ê°€ì§€

- ì»´í¬ë„ŒíŠ¸ê°€ ì´ì „ì— ë Œë”ë§ ë˜ì—ˆì–´ì•¼ í•œë‹¤. ì¦‰, ì´ë¯¸ ë§ˆìš´íŠ¸ ë˜ì—ˆì–´ì•¼ í•œë‹¤.
- ë³€ê²½ëœÂ props(ì°¸ì¡°)ê°€ ì—†ì–´ì•¼ í•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” context ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ì— ì˜ˆì •ëœ ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ì—†ì–´ì•¼ í•œë‹¤.

ì—¬ê¸°ì„œ ì œê°€ ì˜¤í•´í•œ ë¶€ë¶„ì€ â€œ1ë²ˆ. React ì»´í¬ë„ŒíŠ¸ì— ì˜ˆì •ëœ ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ìˆì„ ê²½ìš°â€ì…ë‹ˆë‹¤. ì €ëŠ” ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì´ë¥¼ ê°ì§€í•˜ê³ , í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ í˜¸ì¶œë˜ëŠ” íë¦„ìœ¼ë¡œ ì´í•´í–ˆì—ˆìŠµë‹ˆë‹¤. ì´ì „ì— ë°”ë‹ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í–ˆì„ ë•Œë„ ë¹„ìŠ·í•˜ê²Œ ì´í•´í•˜ê³  ì•„ë˜ì²˜ëŸ¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```jsx
// ëŒ€ì¶© ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°›ì„ ë•Œë§ˆë‹¤ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ render í•˜ëŠ” íë¦„ì„ ê°€ì§„ ë°”ë‹ë¼ ì»´í¬ë„ŒíŠ¸
class Component {
  //...ìƒëµ
  setState(newState) {
    this.state = { ...this.state, ...newState }
    this.render()
  }

  render() {
    this.innerHTML = this.template()
  }
}
```

í•˜ì§€ë§Œ Reactì—ì„œ setStateëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•©ë‹ˆë‹¤. setStateì˜ ë™ì‘ì›ë¦¬ë¥¼ ì •ë¦¬í•˜ê¸° ì „ì— Reactì˜ í•µì‹¬ ê°œë…ê³¼ ë Œë”ë§ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## 3. ìš©ì–´ì •ë¦¬

React ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”„ ì‚¬ì´í´ì„ ê³µë¶€í•˜ê¸° ì „ ì»´í¬ë„ŒíŠ¸, ì—˜ë¦¬ë¨¼íŠ¸, ë Œë”ë§ ë“± ì–´ë ´í’‹ì´ ì•Œê³  ìˆëŠ” ìš©ì–´ë¥¼ ëª…í™•íˆ í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

### React element

React elementëŠ” ì¼ë°˜ì ìœ¼ë¡œ JSX (JavaScript XML) ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì„±ë©ë‹ˆë‹¤. React elementëŠ” DOM Tree ìƒì„±ì— í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ì€ `Javascript ê°ì²´`ì…ë‹ˆë‹¤. JSX ë¬¸ë²•ì€Â `React.createElement()`Â ì„ í˜¸ì¶œí•˜ê¸° ìœ„í•œ í•˜ë‚˜ì˜ ë°©ë²•ì¼ ë¿ì´ê³  Babelì„ í†µí•´ íŒŒì‹± ë˜ê³  íŠ¸ëœìŠ¤ íŒŒì¼ë§ë©ë‹ˆë‹¤.

```ts
;<h1> Hello World </h1>

React.createElement('h1', null, 'Hello world')
```

ì¦‰ React elementëŠ” ì‹¤ì œ DOM ë…¸ë“œê°€ ì•„ë‹™ë‹ˆë‹¤. createElementê°€ ìƒì„±í•œ ê²ƒì€ DOM(or View or Node)ì´ ì•„ë‹ˆë¼ React Elementë¼ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì…ë‹ˆë‹¤.

React ElementëŠ” React DOM node elementì™€ React Component element ë‘ ì¢…ë¥˜ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

- **DOM element**Â : íƒ€ì…ì´ stringì¼ ë•Œ
- **Component element**Â : íƒ€ì…ì´ classì´ê±°ë‚˜ functionì¼ ë•Œ,

ReactëŠ” type ê°’ì´ classì´ê±°ë‚˜ functionì¸ element(React component element)ì„ ë§Œë‚˜ë©´ (1) type ê°’ì„ ë³´ê³ , í•´ë‹¹ component í•¨ìˆ˜ì— elementë¥¼ return ë°›ê³ , return ë°›ì€ elementì˜ type ê°’ì´ tag nameì¸ element(DOM element)ì„ ë§Œë‚  ë•Œê¹Œì§€ 1ë²ˆìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.

### Component

ComponentëŠ” propsë¥¼ ì „ë‹¬ë°›ì•„ React elementë¥¼ ë°˜í™˜í•˜ëŠ” functionì…ë‹ˆë‹¤.

```jsx
import React from 'react'

function App() {
  return <h1>Hello World</h1>
}

import React from 'react'

function App() {
  return React.createElement('h1', null, 'Hello world')
}
```

### ê°€ìƒë”(**Virtual DOM)**

ReactëŠ” ê°€ìƒ ë”ì´ë¼ëŠ” ì‹¤ì œ ë”ê³¼ ë‹¤ë¥¸ ë” ì´ë¯¸ì§€ë¥¼ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê°€ìƒë”ì€ fiber architectureì™€ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.

ê°€ìƒë”ì´ë€ [ê°€ìƒì ì¸ UI(an ideal, or â€œvirtualâ€, representation of a UI)ë¥¼ ë©”ëª¨ë¦¬ì— ìœ ì§€í•˜ë©° ì‹¤ì œ ë”ê³¼ ë™ê¸°í™”í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ì»¨ì…‰](https://legacy.reactjs.org/docs/faq-internals.html)ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ ê³¼ì •ì„ ì¬ì¡°ì •ì´ë¼ê³  í•©ë‹ˆë‹¤.

### ì¬ì¡°ì •(Reconciliation)

ì¬ì¡°ì •ì´ë€ Reactì—ì„œ ì–´ë–¤ ë¶€ë¶„ë“¤ì´ ë³€í•´ì•¼í•˜ëŠ”ì§€ ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°œì˜ íŠ¸ë¦¬ë¥¼ ë¹„êµí•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ë Œë”ë§ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ê°€ìƒë”ì„ ìƒì„±í•˜ê³  ì´ì „ ê°€ìƒë”(snapshot)ê³¼ ë¹„êµí•˜ì—¬ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì‹¤ì œ ë”ì— ë°˜ì˜í•˜ëŠ”ë°, ì´ë•Œ ë¹„êµí•˜ëŠ” ê³¼ì •ì„ ì¬ì¡°ì •(Reconciliation)ë¼ê³  í•©ë‹ˆë‹¤.

### render phase

ê°€ìƒë”ì„ ì¬ì¡°ì •(**Reconciliation**)í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. êµ¬ì²´ì ì¸ ë‚´ìš©ì€ ì•„ë˜ì—ì„œ ìì„¸íˆ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. ìš°ì„  commit phaseì™€ render phaseê°€ êµ¬ë¶„ëœë‹¤ëŠ” ì‚¬ì‹¤ì„ ì¸ì§€ë§Œ í•´ë„ ë©ë‹ˆë‹¤!

### commit phase

ì¬ì¡°ì •í•œ ê°€ìƒ ë”ì„ ì‹¤ì œ ë”ì— ì ìš©í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

## 4. â­ï¸ê³µì‹ ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ëŠ” Renderì™€ Commitâ­ï¸

ì—´ì‹¬íˆ ìš©ì–´ë¥¼ ì •ë¦¬í–ˆë‹¤ë©´ ì´ì œ ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— í‘œì‹œë˜ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ìì„¸íˆ ì‚´í´ë³¼ ì°¨ë¡€ì…ë‹ˆë‹¤.

í•´ë‹¹ ê³¼ì •ì—ì„œ Renderì™€ commitì„ êµ¬ë¶„í•´ì„œ ìƒê°í•´ì•¼ í•©ë‹ˆë‹¤. Reactê°€ UIë¥¼ ìš”ì²­í•˜ê³  ì œê³µí•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” 4ë‹¨ê³„ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ë°ìš”,

1. **Triggering**Â a render
2. **Rendering**Â the component
3. **Committing**Â to the DOM
4. Browser **paint**

### Step 1: Trigger a render

ì»´í¬ë„ŒíŠ¸ê°€ render ë˜ê¸° ìœ„í•œ ë‘ ê°€ì§€ ìƒí™©ì´ ìˆìŠµë‹ˆë‹¤.

1. createRootë¡œ ì¸í•œ ìµœì´ˆì˜ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
2. ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœë¥¼ [set í•¨ìˆ˜](https://react.dev/reference/react/useState#setstate)ë¥¼ í™œìš©í•˜ì—¬ ì—…ë°ì´íŠ¸í•  ë•Œ

### Step 2: React renders your components

> **â€œRenderingâ€ is React calling your components.**

ì¼ë°˜ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì´ë¼ í•˜ë©´ ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œì„ ë– ì˜¬ë¦½ë‹ˆë‹¤. ê²°ë¡ ë¶€í„° ë§í•˜ìë©´, `RenderëŠ” ê°€ìƒë” íŠ¸ë¦¬ë¥¼ ìˆœíšŒí™”ë©´ì„œ ë³€ê²½ëœ ë¶€ë¶„ì„ ì°¾ê³ , í•„ìš”í•œ ì‘ì—…ì„ fiber nodeì— ì €ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.`

ë Œë”ë§ ê³¼ì •ì„ ìª¼ê°œì„œ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ë‹¨ê³„ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ react elementë¥¼ ë°˜í™˜í•œë‹¤.
- ê°€ìƒë” ì¬ì¡°ì • ì‘ì—…ì´ ì§„í–‰ëœë‹¤.
- rendererê°€ ì»´í¬ë„ŒíŠ¸ì˜ ì •ë³´ë¥¼ ì‹¤ì œ ë”ì— ì‚½ì…í•œë‹¤. (mount)
- ë¸Œë¼ìš°ì €ê°€ ë”ì„ paintí•œë‹¤.

í•µì‹¬ì€ `ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œê³¼ DOM ì‚½ì…ì€ ë³„ê°œë¼ëŠ” ì ì…ë‹ˆë‹¤.` ê·¸ë¦¬ê³  Reactì—ì„œëŠ” DOM ì‚½ì…ê³¼ í™”ë©´ì— ê·¸ë ¤ì§€ëŠ” ê²ƒ ë˜í•œ ë³„ê°œë¡œ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤.

ìœ„ì˜ 4ë‹¨ê³„ì—ì„œ ë Œë”ë§ì€ `ì»´í¬ë„ŒíŠ¸ê°€ í˜¸ì¶œë˜ì–´ react elementë¥¼ ë°˜í™˜í•˜ê³  ê°€ìƒë”ì— ì ìš©í•˜ëŠ” ì¼ë ¨ì˜ ê³¼ì •`ê¹Œì§€ì…ë‹ˆë‹¤. ê·¸ ì´í›„ ê³¼ì •ì€ commit ë‹¨ê³„ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Step 3: React commits changes to the DOM

> **React only changes the DOM nodes if thereâ€™s a difference between renders**

ReactëŠ” Commit phaseì—ì„œëŠ” ì¬ì¡°ì •ì´ ëë‚œ ê°€ìƒë”ì„ ì‹¤ì œ ë”ì— ì ìš©í•©ë‹ˆë‹¤.

ì•ì„œ ë Œë”ë§ ë‹¨ê³„ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ ë³€ê²½ì‚¬í•­ì„ íŒŒì•… ë’¤, ReactëŠ” ì‹¤ì œ ë”ì„ ì¡°ì‘í•©ë‹ˆë‹¤. ì´ˆê¸° ë Œë”ë§ì˜ ê²½ìš° ReactëŠ” appendChild() DOM APIë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•œ ëª¨ë“  DOM ë…¸ë“œë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤. ë¦¬ë Œë”ë§ì˜ ê²½ìš° ReactëŠ” DOMì´ ìµœì‹  ë Œë”ë§ ì¶œë ¥ê³¼ ì¼ì¹˜í•˜ë„ë¡ ìµœì†Œí•œì˜ í•„ìˆ˜ ì‘ì—…(ë Œë”ë§ ì¤‘ì— ê³„ì‚°ëœë‹¤ê³  í•˜ë„¤ìš”.)ì„ ì ìš©í•©ë‹ˆë‹¤. (ReactëŠ” ë Œë”ë§ ê°„ì— ì°¨ì´ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ DOM ë…¸ë“œë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.)

ì¦‰, Commit phaseì—ì„œ ReactëŠ” ì¬ì¡°ì •í•œ ê°€ìƒë”ì„ ì‹¤ì œ ë”ì— ì ìš©í•˜ê³  ë¼ì´í”„ ì‚¬ì´í´ì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. ê°€ìƒë”ì„ ì‹¤ì œ ë”ì— ì ìš©í•  ë•Œ, ì¼ê´€ì„±ì„ ìœ„í•´ ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. Reactê°€ ë”ì„ ì¡°ì‘í•œ ë’¤ ì½œìŠ¤íƒì„ ë¹„ì›Œì¤˜ì•¼ ë¸Œë¼ìš°ì €ê°€ paintí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Epilogue: Browser paint

ë Œë”ë§ì´ ì™„ë£Œë˜ê³  Reactê°€ DOMì„ ì—…ë°ì´íŠ¸í•œ í›„ ë¸Œë¼ìš°ì €ëŠ” í™”ë©´ì„ ë‹¤ì‹œ paintí•©ë‹ˆë‹¤. í•´ë‹¹ ê³¼ì •ì„ í”íˆ "ë¸Œë¼ìš°ì € ë Œë”ë§"ì´ë¼ê³  [React ê³µì‹ ë¬¸ì„œ](https://react.dev/learn/render-and-commit#epilogue-browser-paint)ì—ì„œëŠ” ìš©ì–´ì˜ í˜¼ë™ì„ í”¼í•˜ê³ ì paintë¼ê³  ì •ì˜í–ˆìŠµë‹ˆë‹¤.

## 5. Snapshot!

> **ê° renderì˜ ìƒíƒœ(state)ëŠ” ê³ ì •ë˜ì–´ ìˆë‹¤. ëª¨ë“  ë Œë”ë§ì€ ê³ ìœ ì˜ Propê³¼ state, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ê°€ì§„ë‹¤.**

"ë Œë”ë§"ì€ Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ(state)ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë©”ëª¨ë¦¬ì²˜ëŸ¼ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. í•¨ìˆ˜ê°€ ë°˜í™˜ëœ í›„ ì‚¬ë¼ì§€ëŠ” ì¼ë°˜ ë³€ìˆ˜ì™€ ë‹¬ë¦¬ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœëŠ” React ë‚´ë¶€ì—ì„œ ìœ ì§€ë˜ê³  ìˆìŠµë‹ˆë‹¤(â€liveâ€í•œ ìƒíƒœ).

ReactëŠ” êµ¬ì„± ìš”ì†Œë¥¼ í˜¸ì¶œí•  ë•Œ í•´ë‹¹ íŠ¹ì • ë Œë”ë§ì— ëŒ€í•œ ìƒíƒœì˜ snapshotì„ ì œê³µí•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ë“¤ì€ ë Œë”ë§ë§ˆë‹¤ ì°¸ì¡°í•´ì•¼ í•  ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ ì˜ˆì‹œì—ì„œ ë²„íŠ¼ì„ í´ë¦­í•œë‹¤ë©´ alert ë©”ì‹œì§€ì— ì–´ë–¤ ê°’ì´ ì°íê¹Œìš”?

```jsx
import { useState } from 'react'

export default function App() {
  const [name, setName] = useState('ë„ë¦¬')

  const handleClickChangeName = () => {
    setName('í¬ë¡±')
    alert(name)
  }

  return (
    <div>
      <h1>í´ë¦­í•˜ë©´ alertì— ë­ê°€ ì°íê¹Œìš”?</h1>
      <h2>ì´ë¦„ ë³€ê²½</h2>
      {name}
      <button onClick={handleClickChangeName}>ì´ë¦„ ë°”ê¾¸ê¸°</button>
    </div>
  )
}
```

ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

![alert-with setState](./alert.gif)

ReactëŠ” stateë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ì „ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ë’¤ì— set í•¨ìˆ˜ë¥¼ ì„¤ëª…í•˜ë©´ì„œ ìì„¸íˆ ë‹¤ë£¨ê² ì§€ë§Œ, handleClickChangeNameì´ í˜¸ì¶œë˜ëŠ” ì‹œì ì— ì°¸ì¡°í•˜ëŠ” nameì€ â€œë„ë¦¬â€ì´ê¸° ë•Œë¬¸ì— alertì˜ ë©”ì‹œì§€ë¡œ â€œë„ë¦¬â€ê°€ ì°í™ë‹ˆë‹¤. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  nameì„ â€œí¬ë¡±â€ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ì´í›„ Reactì—ì„œ ë³€ê²½ëœ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹©ë‹ˆë‹¤.

## 6. â­ï¸useStateëŠ” ì™œ ì´ë ‡ê²Œ ë™ì‘í•´?â­ï¸

ë“œë””ì–´ useStateë¥¼ ì•Œì•„ë³¼ ì°¨ë¡€ì…ë‹ˆë‹¤. useStateëŠ” stateì™€ setStateë¥¼ ë°˜í™˜í•˜ëŠ” hooksì…ë‹ˆë‹¤.

ê¸€ ì²˜ìŒì— ì œì‹œí•œ ì½”ë“œê°€ ê¸°ì–µë‚˜ì‹œë‚˜ìš”? ì—¬ëŸ¬ ë²ˆì˜ set í•¨ìˆ˜ì™€ ì»´í¬ë„ŒíŠ¸ëŠ” ì™œ ì €ë ‡ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì¼ê¹Œìš”?

## Batches: [Queueing a Series of State Updates](https://react.dev/learn/queueing-a-series-of-state-updates)

ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ê°œì˜ setStateë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ë•Œ React ë‚´ë¶€ ë™ì‘ì€ ì–´ë–»ê²Œ ì´ë¤„ì§€ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ì•ì„œ ì„¤ëª…í–ˆë“¯ì´ ReactëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ì „ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

ì´ë•Œ, set í•¨ìˆ˜ë¥¼ ë°”ë¡œ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³  set í•¨ìˆ˜ì˜ ì¸ìë¡œ ë„˜ê²¨ì¤€ í•¨ìˆ˜ë“¤ì„ íì— ë„£ìŠµë‹ˆë‹¤! `set í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ stateë¥¼ ë°”ë¡œ ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šê³  update í•¨ìˆ˜ë¥¼ í(ëŒ€ê¸°ì—´)ì— ë„£ëŠ” í–‰ìœ„`ë¼ê³  ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. set í•¨ìˆ˜ê°€ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì„ ìœ ë„(trigger)í•˜ê³  ë‚˜ë©´ ReactëŠ” render phaseì—ì„œ ê°€ìƒë”ì„ ì¬ì¡°ì •í•©ë‹ˆë‹¤. ì´ ë•Œ, íì— ìˆëŠ” update í•¨ìˆ˜ë“¤ì„ ì‹¤í–‰í•˜ë©° ìƒˆë¡œìš´ ìƒíƒœ ê°’ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

`ReactëŠ” ëª¨ë“  update í•¨ìˆ˜ë¥¼ íì— ì €ì¥í•œ ë‹¤ìŒ render phaseì—ì„œ í‰ê°€í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ReactëŠ” ê¸°ë³¸ì ìœ¼ë¡œ re-renderë¥¼ ì˜ˆì•½í•©ë‹ˆë‹¤. ReactëŠ” render phaseë¥¼ ì‹¤í–‰í•˜ê³  í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ì„œ ëŒ€ê¸° ì¤‘ì¸ update í•¨ìˆ˜ë“¤ì„ ì ìš©í•œë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`

> **React waits until _all_ code in the event handlers has run before processing your state updates.**

> **_React queues this function to be processed after all the other code in the event handler has run._** During the next render, React goes through the queue and gives you the final updated state.

```jsx
<button
  onClick={() => {
    setNumber(n => n + 1) // (n) => n + 1ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ íì— ë“±ë¡
    setNumber(n => n + 1) // (n) => n + 1ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ íì— ë“±ë¡
    setNumber(n => n + 1) // (n) => n + 1ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ íì— ë“±ë¡
  }}
>
  +3
</button>
```

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì™„ë£Œë˜ë©´ ReactëŠ” ë‹¤ì‹œ ë Œë”ë§ì„ íŠ¸ë¦¬ê±° í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë Œë”ë§í•˜ëŠ” ë™ì•ˆ ReactëŠ” íë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. Updater í•¨ìˆ˜ëŠ” ë Œë”ë§ ì¤‘ì— ì‹¤í–‰ë˜ë¯€ë¡œ Updater í•¨ìˆ˜ëŠ” ìˆœìˆ˜í•´ì•¼ í•˜ë©° ê²°ê³¼ë§Œ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.

ì•„ë˜ GIFë¥¼ ë³´ë©´ setStateê°€ ì‹¤í–‰ë  ë•Œ íì— ë“±ë¡ë˜ê³  ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ ì´í›„ íê°€ ë¹Œ ë•Œê¹Œì§€ updater í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì„ í†µí•´ memoizedState(ìƒˆë¡œ ê³„ì‚°ëœ state)ì„ ë°˜í™˜í•˜ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![setState](./setState.gif)

ì •ë¦¬í•˜ìë©´, ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ëŠ” ë³€ê²½ëœ ì˜ˆì •ëœ update í•¨ìˆ˜ê°€ íì— ìˆì„ ë•Œ, render phaseì—ì„œ ì¬ì¡°ì • ì‘ì—…ì´ ì¼ì–´ë‚©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì•ì„  ì˜ˆì œì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ í˜¸ì¶œì´ ë¨¼ì € ì¼ì–´ë‚˜ê³  useStateë¥¼ ì½ëŠ” ê³¼ì •ì—ì„œ update í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
2nd click after : click â†’ app render â†’ add 2 â†’ add 3 â†’ return
```

![set](./set.gif)

### íš¨ìœ¨ì„± ë³´ì¥

setState í˜¸ì¶œì´ ì¦‰ì‹œ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ReactëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìƒíƒœ ë³€ê²½ì„ ì¼ê´„ ì²˜ë¦¬í•˜ê³  ìµœì ì˜ ì„±ëŠ¥ì„ ìœ„í•´ ì—…ë°ì´íŠ¸ë¥¼ ì§€ì—°ì‹œí‚µë‹ˆë‹¤. ì´ëŸ¬í•œ ì§€ì—°ì€ Reactì˜ ë¹„ë™ê¸°ì ì¸ ì—…ë°ì´íŠ¸ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì¸ "batching" ë•Œë¬¸ì…ë‹ˆë‹¤. ReactëŠ” í•œ ë²ˆì˜ ë Œë”ë§ ì£¼ê¸° ë‚´ì—ì„œ `ì—¬ëŸ¬ setState í˜¸ì¶œì„ í•œ ë²ˆì— ì²˜ë¦¬í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ì¤„ì´ê³  ì„±ëŠ¥ì„ ìµœì í™”`í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ setState í˜¸ì¶œì´ ìˆìœ¼ë©´, ê° setState í˜¸ì¶œì€ ë³„ë„ì˜ ì—…ë°ì´íŠ¸ë¡œ íì— ì¶”ê°€ë©ë‹ˆë‹¤. ReactëŠ” ì´ëŸ¬í•œ ì—¬ëŸ¬ ì—…ë°ì´íŠ¸ë¥¼ í•˜ë‚˜ì˜ ì—…ë°ì´íŠ¸ë¡œ ê²°í•©í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì¤‘ë³µëœ ë Œë”ë§ì´ë‚˜ ì„±ëŠ¥ ì €í•˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ, `setState í˜¸ì¶œì€ Reactì—ê²Œ ìƒíƒœ ë³€ê²½ì„ ì•Œë¦¬ëŠ” ê²ƒì´ì§€, ì¦‰ì‹œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤`. ReactëŠ” ë‚´ë¶€ì ì¸ ë³€ê²½ ê°ì§€ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ë³€ê²½ì„ ê°ì§€í•©ë‹ˆë‹¤. ìƒíƒœê°€ ë³€ê²½ëë‹¤ë©´ ReactëŠ” ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•˜ê³  í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‹¤ì œ ë”ì— ë°˜ì˜í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ReactëŠ” ë¶ˆí•„ìš”í•œ ë Œë”ë§ ì‘ì—…ì„ ìµœì†Œí™”í•˜ê³  íš¨ìœ¨ì ì¸ UI ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### ê·¸ëŸ¬ë©´ ì™œ ì²« setStateëŠ” render ì „ì— ì‹¤í–‰ë˜ê³  ì´í›„ setStateëŠ” íì— ë“±ë¡ë¼?

ì •í™•í•œ í•´ë‹µì€ ì•„ë‹ˆì§€ë§Œ ì†ŒìŠ¤ ì½”ë“œì˜ ì£¼ì„ì„ ì°¸ê³ í–ˆì„ ë•Œ "ë‚´ë¶€ ë™ì‘ì´ ì´ë ‡êµ¬ë‚˜" ì •ë„ë¡œ ì´í•´í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì•„ë˜ ì½”ë“œëŠ” setStateë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” dispatchSetStateí•¨ìˆ˜ì˜ ì¼ë¶€ë¶„ì…ë‹ˆë‹¤. ìµœì´ˆ ë Œë”ë§(mount) ì´í›„ íëŠ” ë¹„ì–´ìˆê¸° ë•Œë¬¸ì— ì „ì²´ render phase ì „ì— ë‹¤ìŒ ìƒíƒœë¥¼ ì—´ì‹¬íˆ(eagerly) ê³„ì‚°í•œë‹¤ê³  í•©ë‹ˆë‹¤. ([ì†ŒìŠ¤ ì½”ë“œ](https://github.com/facebook/react/blob/v18.0.0/packages/react-reconciler/src/ReactFiberHooks.new.js#L2234-L2259))

```jsx
if (fiber.lanes === NoLanes && (alternate === null || alternate.lanes === NoLanes)) {
  // The queue is currently empty, which means we can eagerly compute the
  // next state before entering the render phase. If the new state is the
  // same as the current state, we may be able to bail out entirely.
  ...
```

ì•„ë˜ GIFë¥¼ ë³´ë©´ ì²« setStateëŠ” í•´ë‹¹ if ë¬¸ì—ì„œ ê±¸ë¦¬ëŠ” ë° ë°˜í•´, ì´í›„ setStateëŠ” ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ ì´í›„ íì—ì„œ ê³„ì‚°ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![init-setState](./init-setstate.gif)

## ë§ˆë¬´ë¦¬

update í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ë‚œ ë’¤, ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤! íš¨ìœ¨ì ì¸ ë Œë”ë§ì„ ìœ„í•´ setí•¨ìˆ˜ë¡œ updateí•¨ìˆ˜ë¥¼ íì— ë“±ë¡í•  ë•Œ, render phaseê°€ ì‹¤í–‰ë˜ë©° í•´ë‹¹ ê³¼ì •ì—ì„œ ì¬ì¡°ì • ì‘ì—…ì„ í†µí•´ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤. render phaseì™€ commit phaseë¥¼ ë¶„ë¦¬í•˜ì—¬ ê°€ìƒë”ì˜ ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œë§Œ ì‹¤ì œ ë”ì— ë°˜ì˜í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

í•´ë‹¹ ê¸€ì—ì„œëŠ” ë‹¤ë£¨ì§€ ì•Šì•˜ì§€ë§Œ Reactì˜ ë‚´ë¶€ ë™ì‘ì„ ì™„ë²½íˆ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” fiber architecture, reconciler, schedulerì™€ ê°™ì€ ê°œë…ì„ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. í•™ìŠµ ê³¼ì •ì—ì„œ ì°¾ì•„ë´¤ì§€ë§Œ ì œê°€ ì •ë¦¬í•˜ê³  ê³µìœ í•  ìˆ˜ì¤€ì€ ì•ˆ ëœë‹¤ê³  ìƒê°í•´ ì¢‹ì€ ì°¸ê³  ìë£Œë§Œ ë‚¨ê¹ë‹ˆë‹¤!

- React18 í†ºì•„ë³´ê¸° ì‹œë¦¬ì¦ˆ(ê¸€): [https://goidle.github.io](https://goidle.github.io/)
- React ê¹Œë³´ê¸° ì‹œë¦¬ì¦ˆ(ìœ íŠœë¸Œ): https://www.youtube.com/watch?v=JadWu4Ygnyc&list=PLpq56DBY9U2B6gAZIbiIami_cLBhpHYCA

ê¸´ ê¸€ ë´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì²˜ìŒì—ëŠ” ê°„ë‹¨í•˜ê²Œ useStateì˜ ë™ì‘ ì›ë¦¬ì— ëŒ€í•´ì„œë§Œ ì •ë¦¬í• ê¹Œ ê³ ë¯¼ì„ í–ˆì—ˆìŠµë‹ˆë‹¤ğŸ˜…. í•˜ì§€ë§Œ `Reactì˜ ë Œë”ë§ê³¼ setStateì˜ ë™ì‘ ì›ë¦¬ì— ëŒ€í•œ ì´í•´ê°€ React ê°œë°œì— ìˆì–´ì„œ í•µì‹¬ì ì¸ ë¶€ë¶„`ì´ë¼ê³  ìƒê°í•´ í•µì‹¬ ìš©ì–´ ì •ë¦¬ë¶€í„° ì‹œì‘í•´ ë Œë”ë§ íë¦„ setStateì˜ ë™ì‘ ì›ë¦¬ê¹Œì§€ ì œê°€ ì´í•´í•œ ë¶€ë¶„ì„ ì •ë¦¬í•´ ë´¤ìŠµë‹ˆë‹¤.

ì´ì „ê¹Œì§€ ì–´ë ´í’‹ì´ ì•Œê³  ìˆì—ˆë˜ â€œê°€ìƒë”ì„ í™œìš©í•œ íš¨ìœ¨ì ì¸ ì—…ë°ì´íŠ¸â€, "ë¹„ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” setStateâ€, â€œë°°ì¹˜(batching)â€ ë“±ì˜ ê°œë…ì— ëŒ€í•´ì„œ ê¹Šê²Œ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆëŠ” ê²½í—˜ì´ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ë°”ë‹ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ë•Œë¶€í„° ëŠê¼ˆë˜ `ì»´í¬ë„ŒíŠ¸ì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜`ì˜ ì¤‘ìš”ì„±ì„ ë‹¤ì‹œ í•œë²ˆ ëŠë‚„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

## ì°¸ê³  ìë£Œ

- https://react.dev/learn/render-and-commit
- https://react.dev/learn/state-as-a-snapshot
- https://react.dev/learn/queueing-a-series-of-state-updates
- https://velog.io/@eunbinn/when-does-react-render-your-component
- https://github.com/acdlite/react-fiber-architecture
- https://legacy.reactjs.org/docs/faq-internals.html
- https://github.com/facebook/react/issues/11527#issuecomment-360199710
- https://github.com/facebook/react/issues/20817#issuecomment-1293655302
- https://immigration9.github.io/react/2021/05/29/react-fiber-architecture.html
- https://bumkeyy.gitbook.io/bumkeyy-code/frontend/a-deep-dive-into-react-fiber-internals
- https://www.youtube.com/watch?v=JadWu4Ygnyc&list=PLpq56DBY9U2B6gAZIbiIami_cLBhpHYCA
- [https://goidle.github.io](https://goidle.github.io/)
- [https://hkc7180.medium.com/react-components-elements-and-instances-ë²ˆì—­ê¸€-b5744930846b](https://hkc7180.medium.com/react-components-elements-and-instances-%EB%B2%88%EC%97%AD%EA%B8%80-b5744930846b)
- https://github.com/reactwg/react-18/discussions/21#discussioncomment-800975
- https://github.com/facebook/react/issues/20817#issuecomment-1293655302
- https://github.com/reactjs/react.dev/issues/5215
